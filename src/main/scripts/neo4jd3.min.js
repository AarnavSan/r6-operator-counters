!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Neo4jd3=t()}}(function(){return function(){function t(e,n,r){function o(i,u){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){return o(e[i][1][t]||t)},l,l.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}return t}()({1:[function(t,e,n){"use strict";var r=t("./scripts/neo4jd3");e.exports=r},{"./scripts/neo4jd3":2}],2:[function(t,e,n){"use strict";function r(t,e){function n(t){kt=t.append("svg").attr("width","100%").attr("height","100%").attr("class","neo4jd3-graph").call(d3.zoom().on("zoom",function(){var t=d3.event.transform.k,e=[d3.event.transform.x,d3.event.transform.y];Dt&&(e[0]+=Dt[0],e[1]+=Dt[1]),Ct&&(t*=Ct),kt.attr("transform","translate("+e[0]+", "+e[1]+") scale("+t+")")})).on("dblclick.zoom",null).append("g").attr("width","100%").attr("height","100%"),Mt=kt.append("g").attr("class","relationships"),bt=kt.append("g").attr("class","nodes"),kt.append("svg:defs").append("svg:marker").attr("id","hardTriangle").attr("refX",2).attr("refY",2).attr("markerWidth",30).attr("markerHeight",30).attr("markerUnits","userSpaceOnUse").attr("orient","0").append("path").attr("d","M 0 0 8 2 0 4 1 2").attr("class","hardcountertriangle"),kt.append("svg:defs").append("svg:marker").attr("id","softTriangle").attr("refX",2).attr("refY",2).attr("markerWidth",30).attr("markerHeight",30).attr("markerUnits","userSpaceOnUse").attr("orient","0").append("path").attr("d","M 0 0 8 2 0 4 1 2").attr("class","softcountertriangle"),kt.append("svg:defs").append("svg:marker").attr("id","minorTriangle").attr("refX",2).attr("refY",2).attr("markerWidth",30).attr("markerHeight",30).attr("markerUnits","userSpaceOnUse").attr("orient","0").append("path").attr("d","M 0 0 8 2 0 4 1 2").attr("class","minorcountertriangle")}function r(t){return t.append("image").attr("height",function(t){return j(t)?"24px":"70px"}).attr("x",function(t){return j(t)?"5px":"-35px"}).attr("xlink:href",function(t){return w(t)}).attr("y",function(t){return j(t)?"5px":"-35px"}).attr("width",function(t){return j(t)?"24px":"70px"})}function o(t){return t.append("div").attr("class","neo4jd3-info")}function a(t,e,n,r){var o=lt.append("a");o.attr("href","#").attr("class",t).html("<strong>"+n+"</strong>"+(r?": "+r:"")),r||o.style("background-color",function(t){return Et.nodeOutlineFillColor?Et.nodeOutlineFillColor:e?x(n):b()}).style("border-color",function(t){return Et.nodeOutlineFillColor?m(Et.nodeOutlineFillColor):e?m(n):M()}).style("color",function(t){return Et.nodeOutlineFillColor?m(Et.nodeOutlineFillColor):"#fff"})}function i(t,e,n,r){return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.relationships=t.graph.relationships.filter(function(t){return!(!e||"Hard Counter"!==t.type)||(!(!n||"Soft Counter"!==t.type)||!(!r||"Minor Counter"!==t.type))})})}),t}function u(t,e){a(t,!0,e)}function s(t,e,n){"&lt;id&gt;"!==e&&a(t,!1,e,n)}function c(t,e){a(t,!1,e)}function l(){return ft.enter().append("g").attr("class",function(t){var e,n,r="node";t.labels[0];if(j(t)&&(r+=" node-icon"),w(t)&&(r+=" node-image"),Et.highlight)for(n=0;n<Et.highlight.length;n++)if(e=Et.highlight[n],t.labels[0]===e.class&&t.properties[e.property]===e.value){r+=" node-highlighted";break}return r}).on("click",function(t){t.fx=t.fy=null,"function"==typeof Et.onNodeClick&&Et.onNodeClick(t)}).on("dblclick",function(t){q(t),"function"==typeof Et.onNodeDoubleClick&&Et.onNodeDoubleClick(t)}).on("mouseenter",function(t){lt&&rt(t),"function"==typeof Et.onNodeMouseEnter&&Et.onNodeMouseEnter(t)}).on("mouseleave",function(t){lt&&v(t),"function"==typeof Et.onNodeMouseLeave&&Et.onNodeMouseLeave(t)}).call(d3.drag().on("start",N).on("drag",D).on("end",C))}function f(){var t=l();return Et.icons,Et.images&&r(t),t}function d(){return pt.enter().append("g").attr("class","relationship").on("dblclick",function(t){"function"==typeof Et.onRelationshipDoubleClick&&Et.onRelationshipDoubleClick(t)}).on("mouseenter",function(t){lt&&rt(t)})}function p(t){return t.append("path").attr("class",function(t){return"Hard Counter"===t.type?"outline link hardcounter":"Soft Counter"===t.type?"outline link softcounter":"Minor Counter"===t.type?"outline link minorcounter":"outline link"}).attr("marker-end",function(t){return"Hard Counter"===t.type?"url(#hardTriangle)":"Soft Counter"===t.type?"url(#softTriangle)":"url(#minorTriangle)"})}function y(t){return t.append("path").attr("class","overlay")}function h(t){return t.append("text").attr("class","text").attr("fill","#ffffff").attr("font-size","8px").attr("pointer-events","none").attr("text-anchor","middle").text(function(t){var e=t.type;return Ot[t.endNode+","+t.startNode+","+t.type+","]=!0,e})}function g(){var t=d(),e=h(t);return{outline:p(t),overlay:y(t),relationship:t,text:e}}function x(t){var e=Nt[t];return e||(e=Et.colors[wt%Et.colors.length],Nt[t]=e,wt++),e}function m(t){return d3.rgb(x(t)).darker(1)}function v(){lt.html("")}function k(t,e){return t.filter(function(t){return t.id===e}).length>0}function b(){return Et.relationshipColor}function M(){return d3.rgb(Et.colors[Et.colors.length-1]).darker(1)}function C(t){d3.event.active||vt.alphaTarget(0),"function"==typeof Et.onNodeDragEnd&&Et.onNodeDragEnd(t)}function D(t){q(t)}function N(t){d3.event.active||vt.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,"function"==typeof Et.onNodeDragStart&&Et.onNodeDragStart(t)}function j(t){var e;return Et.iconMap&&Et.showIcons&&Et.icons&&(Et.icons[t.labels[0]]&&Et.iconMap[Et.icons[t.labels[0]]]?e=Et.iconMap[Et.icons[t.labels[0]]]:Et.iconMap[t.labels[0]]?e=Et.iconMap[t.labels[0]]:Et.icons[t.labels[0]]&&(e=Et.icons[t.labels[0]])),e}function w(t){var e,n,r,o,a,i,u,s;if(Et.images&&(n=Et.imageMap[t.labels[0]]))for(o=0,e=0;e<n.length;e++){switch(i=n[e].split("|"),i.length){case 3:s=i[2];case 2:u=i[1];case 1:a=i[0]}t.labels[0]!==a||u&&void 0===t.properties[u]||s&&t.properties[u]!==s||i.length>o&&(r=Et.images[n[e]],o=i.length)}return r}function E(){var t,e;for(t in Et.images)Et.images.hasOwnProperty(t)&&(e=t.split("|"),Et.imageMap[e[0]]?Et.imageMap[e[0]].push(t):Et.imageMap[e[0]]=[t])}function O(){return d3.forceSimulation().force("collide",d3.forceCollide().radius(function(t){return Et.minCollision}).iterations(2)).force("charge",d3.forceManyBody()).force("link",d3.forceLink().id(function(t){return t.id})).force("center",d3.forceCenter(kt.node().parentElement.parentElement.clientWidth/2,kt.node().parentElement.parentElement.clientHeight/2)).on("tick",function(){Q()}).on("end",function(){Et.zoomFit&&!jt&&(jt=!0,st(2))})}function U(){dt=[],xt=[],nt(Et.neo4jData)}function R(t){dt=[],xt=[],d3.json(t,function(t,e){if(t)throw t;e=i(e,Et.counters[0],Et.counters[1],Et.counters[2]),nt(e)})}function S(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})}function F(t){var e={nodes:[],relationships:[]};return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.nodes.forEach(function(t){k(e.nodes,t.id)||e.nodes.push(t)});var n=t.graph.relationships;n.forEach(function(t){t.startNode!==t.endNode&&(t.source=t.startNode,t.target=t.endNode,e.relationships.push(t))});for(var r=0;r<n.length;r++)for(var o=r;o<n.length;o++)n[r].linknum||(n[r].linknum=1),n[o].linknum||(n[o].linknum=1),n[r].source===n[o].target&&n[r].target===n[o].source&&(n[r].linknum=2,n[o].linknum=2)})}),e}function T(t,e){var n,r,o,a,i={nodes:[],relationships:[]},u=1+(e*Math.random()<<0),s=W();for(n=0;n<u;n++)r=L(),o={id:s.nodes+1+n,labels:[r],properties:{random:r},x:t.x,y:t.y},i.nodes[i.nodes.length]=o,a={id:s.relationships+1+n,type:r.toUpperCase(),startNode:t.id,endNode:s.nodes+1+n,properties:{from:Date.now()},source:t.id,target:s.nodes+1+n,linknum:s.relationships+1+n},i.relationships[i.relationships.length]=a;return i}function L(){var t=Object.keys(Et.iconMap);return t[t.length*Math.random()<<0]}function z(t,e,n,r,o){var a=Math.PI/180*o,i=Math.cos(a),u=Math.sin(a);return{x:i*(n-t)+u*(r-e)+t,y:i*(r-e)-u*(n-t)+e}}function H(t,e,n){return z(t.x,t.y,e.x,e.y,n)}function A(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function W(){return{nodes:dt.length,relationships:xt.length}}function q(t){t.fx=d3.event.x,t.fy=d3.event.y}function Q(){B(),P()}function B(){ft&&ft.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})}function P(){pt&&(pt.attr("transform",function(t){var e={x:0,y:0},n=A(t.source,t.target),r=tt(t.source,t.target),o=$(t.source,t.target),a=H(e,r,-10),i=H(e,{x:0+(Et.nodeRadius+1)*r.x-o.x,y:0+(Et.nodeRadius+1)*r.y-o.y},n+10),u=H(e,{x:t.target.x-t.source.x-(Et.nodeRadius+2)*a.x,y:t.target.y-t.source.y-(Et.nodeRadius+2)*a.y},n),s=$(i,u),c={x:(i.x+u.x)/2+20*s.x,y:(i.y+u.y)/2+20*s.y};return t.outline={middle:c,source:i,target:u,u:s},"translate("+t.source.x+", "+t.source.y+") rotate("+n+")"}),G(),Z(),Y())}function Z(){pt.each(function(){var t=d3.select(this).select(".outline"),e=d3.select(this).select(".text");t.attr("d",function(t){return 1===t.linknum?I(t,e):X(t)})})}function I(t,e){var n={x:0,y:0},r=A(t.source,t.target),o=e.node().getBBox(),a=tt(t.source,t.target),i={x:.5*(t.target.x-t.source.x-(o.width+5)*a.x),y:.5*(t.target.y-t.source.y-(o.width+5)*a.y)},u=$(t.source,t.target),s=H(n,{x:i.x-u.x,y:i.y-u.y},r),c=H(n,{x:0+(Et.nodeRadius+1)*a.x,y:0+(Et.nodeRadius+1)*a.y},r),l=H(n,{x:t.target.x-t.source.x-(Et.nodeRadius+1)*a.x,y:t.target.y-t.source.y-(Et.nodeRadius+1)*a.y},r),f=H(n,{x:t.target.x-t.source.x-i.x-u.x,y:t.target.y-t.source.y-i.y-u.y},r);return"M "+s.x+" "+s.y+" L "+c.x+" "+c.y+" Z M "+l.x+" "+l.y+" L "+f.x+" "+f.y+" Z"}function X(t){var e=t.outline.source,n=t.outline.target,r=t.outline.middle;return"M "+n.x+", "+n.y+" Q "+r.x+" "+r.y+" "+e.x+" "+e.y+" Q "+r.x+" "+r.y+" "+n.x+", "+n.y}function Y(){ht.attr("d",function(t){return 1===t.linknum?_(t):J(t)})}function _(t){var e={x:0,y:0},n=A(t.source,t.target),r=$(t.source,t.target),o=$(t.source,t.target,50),a=H(e,{x:0-o.x,y:0-o.y},n),i=H(e,{x:t.target.x-t.source.x-o.x,y:t.target.y-t.source.y-o.y},n),u=H(e,{x:t.target.x-t.source.x+o.x-r.x,y:t.target.y-t.source.y+o.y-r.y},n),s=H(e,{x:0+o.x-r.x,y:0+o.y-r.y},n);return"M "+a.x+" "+a.y+" L "+i.x+" "+i.y+" L "+u.x+" "+u.y+" L "+s.x+" "+s.y+" Z"}function J(t){var e=t.outline.source,n=t.outline.target,r=t.outline.middle;return"M "+(e.x+5)+", "+(e.y+5)+" Q "+(r.x+5)+" "+(r.y+5)+" "+(n.x-5)+" "+(n.y-5)+"Q  "+(r.x-5)+" "+(r.y-5)+"  "+(e.x-5)+" "+(e.y-5)+"Z M "+(n.x-5)+", "+(n.y-5)+" Q "+(r.x-5)+" "+(r.y-5)+" "+(e.x+5)+" "+(e.y+5)+"Q  "+(r.x+5)+" "+(r.y+5)+"  "+(n.x+5)+" "+(n.y+5)+"Z"}function G(){gt.attr("transform",function(t){return 1===t.linknum?K(t):V(t)})}function K(t){var e=(A(t.source,t.target)+360)%360,n=e>90&&e<270,r={x:0,y:0},o=$(t.source,t.target),a=n?2:-3,i={x:.5*(t.target.x-t.source.x)+o.x*a,y:.5*(t.target.y-t.source.y)+o.y*a},u=H(r,i,e);return"translate("+u.x+", "+u.y+") rotate("+(n?180:0)+")"}function V(t){var e=(A(t.source,t.target)+360)%360,n=e>90&&e<270,r=t.outline.source,o=t.outline.target,a=t.outline.u,i={x:(r.x+o.x)/2+a.x*(n?8:10)+a.x,y:(r.y+o.y)/2+a.y*(n?8:10)+a.y};return"translate("+i.x+", "+i.y+") rotate("+(n?180:0)+")"}function $(t,e,n){return H({x:0,y:0},tt(t,e,n),90)}function tt(t,e,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/Math.sqrt(n||1);return{x:(e.x-t.x)/r,y:(e.y-t.y)/r}}function et(t){at(t.nodes,t.relationships)}function nt(t){et(F(t))}function rt(t){v(),t.labels?u("class",t.labels[0]):c("class",t.type),s("property","&lt;id&gt;",t.id),Object.keys(t.properties).forEach(function(e){s("property",e,JSON.stringify(t.properties[e]))})}function ot(t){Array.prototype.push.apply(dt,t),ft=bt.selectAll(".node").data(dt,function(t){return t.id});var e=f();ft=e.merge(ft)}function at(t,e){it(e),ot(t),vt.nodes(dt),vt.force("link").links(xt)}function it(t){Array.prototype.push.apply(xt,t),pt=Mt.selectAll(".relationship").data(xt,function(t){return t.id});var e=g();pt=e.relationship.merge(pt),yt=kt.selectAll(".relationship .outline"),yt=e.outline.merge(yt),ht=kt.selectAll(".relationship .overlay"),ht=e.overlay.merge(ht),gt=kt.selectAll(".relationship .text"),gt=e.text.merge(gt)}function ut(){return Ut}function st(t){var e=kt.node().getBBox(),n=kt.node().parentElement.parentElement,r=n.clientWidth,o=n.clientHeight,a=e.width,i=e.height,u=e.x+a/2,s=e.y+i/2;0!==a&&0!==i&&(Ct=.85/Math.max(a/r,i/o),Dt=[r/2-Ct*u,o/2-Ct*s],kt.attr("transform","translate("+Dt[0]+", "+Dt[1]+") scale("+Ct+")"))}var ct,lt,ft,dt,pt,yt,ht,gt,xt,mt,vt,kt,bt,Mt,Ct,Dt,Nt={},jt=!1,wt=0,Et={arrowSize:4,colors:function(){return["#68bdf6","#6dce9e","#faafc2","#f2baf6","#ff928c","#fcea7e","#ffc766","#405f9e","#a5abb6","#78cecb","#b88cbb","#ced2d9","#e84646","#fa5f86","#ffab1a","#fcda19","#797b80","#c9d96f","#47991f","#70edee","#ff75ea"]}(),highlight:void 0,iconMap:void 0,icons:void 0,imageMap:{},images:void 0,infoPanel:!0,minCollision:void 0,neo4jData:void 0,neo4jDataUrl:void 0,nodeOutlineFillColor:void 0,nodeRadius:25,relationshipColor:"#a5abb6",zoomFit:!1,counters:[!0,!0,!1]},Ot={},Ut="0.0.1";return function(t,e){S(Et,e),Et.icons&&(Et.showIcons=!0),Et.minCollision||(Et.minCollision=2*Et.nodeRadius),E(),mt=t,ct=d3.select(mt),ct.attr("class","neo4jd3").html(""),Et.infoPanel&&(lt=o(ct)),n(ct),vt=O(),Et.neo4jData?U(Et.neo4jData):Et.neo4jDataUrl?R(Et.neo4jDataUrl):console.error("Error: both neo4jData and neo4jDataUrl are empty!")}(t,e),{neo4jDataToD3Data:F,randomD3Data:T,size:W,updateWithD3Data:et,updateWithNeo4jData:nt,version:ut}}e.exports=r},{}]},{},[1])(1)});