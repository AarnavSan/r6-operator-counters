!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Neo4jd3=t()}}(function(){return function(){function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};e[a][0].call(s.exports,function(t){return o(e[a][1][t]||t)},s,s.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}return t}()({1:[function(t,e,n){"use strict";var r=t("./scripts/neo4jd3");e.exports=r},{"./scripts/neo4jd3":2}],2:[function(t,e,n){"use strict";function r(t,e){function n(t){bt=t.append("svg").attr("width","100%").attr("height","100%").attr("class","neo4jd3-graph").call(d3.zoom().on("zoom",function(){var t=d3.event.transform.k,e=[d3.event.transform.x,d3.event.transform.y];Ct&&(e[0]+=Ct[0],e[1]+=Ct[1]),Dt&&(t*=Dt),bt.attr("transform","translate("+e[0]+", "+e[1]+") scale("+t+")")})).on("dblclick.zoom",null).append("g").attr("width","100%").attr("height","100%"),Mt=bt.append("g").attr("class","relationships"),kt=bt.append("g").attr("class","nodes"),bt.append("svg:defs").append("svg:marker").attr("id","triangle").attr("refX",2).attr("refY",2).attr("markerWidth",30).attr("markerHeight",30).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 0 0 4 2 0 4 1 2").style("fill","#a5abb6")}function r(t){return t.append("image").attr("height",function(t){return j(t)?"24px":"70px"}).attr("x",function(t){return j(t)?"5px":"-35px"}).attr("xlink:href",function(t){return w(t)}).attr("y",function(t){return j(t)?"5px":"-35px"}).attr("width",function(t){return j(t)?"24px":"70px"})}function o(t){return t.append("div").attr("class","neo4jd3-info")}function i(t,e,n,r){var o=st.append("a");o.attr("href","#").attr("class",t).html("<strong>"+n+"</strong>"+(r?": "+r:"")),r||o.style("background-color",function(t){return Et.nodeOutlineFillColor?Et.nodeOutlineFillColor:e?g(n):k()}).style("border-color",function(t){return Et.nodeOutlineFillColor?m(Et.nodeOutlineFillColor):e?m(n):M()}).style("color",function(t){return Et.nodeOutlineFillColor?m(Et.nodeOutlineFillColor):"#fff"})}function a(t,e,n,r){return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.relationships=t.graph.relationships.filter(function(t){return!(!e||"Hard Counter"!==t.type)||(!(!n||"Soft Counter"!==t.type)||!(!r||"Minor Counter"!==t.type))})})}),t}function u(t,e){i(t,!0,e)}function c(t,e,n){"&lt;id&gt;"!==e&&i(t,!1,e,n)}function l(t,e){i(t,!1,e)}function s(){return ft.enter().append("g").attr("class",function(t){var e,n,r="node";t.labels[0];if(j(t)&&(r+=" node-icon"),w(t)&&(r+=" node-image"),Et.highlight)for(n=0;n<Et.highlight.length;n++)if(e=Et.highlight[n],t.labels[0]===e.class&&t.properties[e.property]===e.value){r+=" node-highlighted";break}return r}).on("click",function(t){t.fx=t.fy=null,"function"==typeof Et.onNodeClick&&Et.onNodeClick(t)}).on("dblclick",function(t){P(t),"function"==typeof Et.onNodeDoubleClick&&Et.onNodeDoubleClick(t)}).on("mouseenter",function(t){st&&rt(t),"function"==typeof Et.onNodeMouseEnter&&Et.onNodeMouseEnter(t)}).on("mouseleave",function(t){st&&v(t),"function"==typeof Et.onNodeMouseLeave&&Et.onNodeMouseLeave(t)}).call(d3.drag().on("start",N).on("drag",C).on("end",D))}function f(){var t=s();return Et.icons,Et.images&&r(t),t}function d(){return pt.enter().append("g").attr("class","relationship").on("dblclick",function(t){"function"==typeof Et.onRelationshipDoubleClick&&Et.onRelationshipDoubleClick(t)}).on("mouseenter",function(t){st&&rt(t)})}function p(t){return t.append("path").attr("class","outline link").attr("fill","#a5abb6").attr("marker-end","url(#triangle)")}function y(t){return t.append("path").attr("class","overlay")}function x(t){return t.append("text").attr("class","text").attr("fill","#ffffff").attr("font-size","8px").attr("pointer-events","none").attr("text-anchor","middle").text(function(t){var e=t.type;return Ot[t.endNode+","+t.startNode+","+t.type+","]=!0,e})}function h(){var t=d(),e=x(t);return{outline:p(t),overlay:y(t),relationship:t,text:e}}function g(t){var e=Nt[t];return e||(e=Et.colors[wt%Et.colors.length],Nt[t]=e,wt++),e}function m(t){return d3.rgb(g(t)).darker(1)}function v(){st.html("")}function b(t,e){return t.filter(function(t){return t.id===e}).length>0}function k(){return Et.relationshipColor}function M(){return d3.rgb(Et.colors[Et.colors.length-1]).darker(1)}function D(t){d3.event.active||vt.alphaTarget(0),"function"==typeof Et.onNodeDragEnd&&Et.onNodeDragEnd(t)}function C(t){P(t)}function N(t){d3.event.active||vt.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,"function"==typeof Et.onNodeDragStart&&Et.onNodeDragStart(t)}function j(t){var e;return Et.iconMap&&Et.showIcons&&Et.icons&&(Et.icons[t.labels[0]]&&Et.iconMap[Et.icons[t.labels[0]]]?e=Et.iconMap[Et.icons[t.labels[0]]]:Et.iconMap[t.labels[0]]?e=Et.iconMap[t.labels[0]]:Et.icons[t.labels[0]]&&(e=Et.icons[t.labels[0]])),e}function w(t){var e,n,r,o,i,a,u,c;if(Et.images&&(n=Et.imageMap[t.labels[0]]))for(o=0,e=0;e<n.length;e++){switch(a=n[e].split("|"),a.length){case 3:c=a[2];case 2:u=a[1];case 1:i=a[0]}t.labels[0]!==i||u&&void 0===t.properties[u]||c&&t.properties[u]!==c||a.length>o&&(r=Et.images[n[e]],o=a.length)}return r}function E(){var t,e;for(t in Et.images)Et.images.hasOwnProperty(t)&&(e=t.split("|"),Et.imageMap[e[0]]?Et.imageMap[e[0]].push(t):Et.imageMap[e[0]]=[t])}function O(){return d3.forceSimulation().force("collide",d3.forceCollide().radius(function(t){return Et.minCollision}).iterations(2)).force("charge",d3.forceManyBody()).force("link",d3.forceLink().id(function(t){return t.id})).force("center",d3.forceCenter(bt.node().parentElement.parentElement.clientWidth/2,bt.node().parentElement.parentElement.clientHeight/2)).on("tick",function(){W()}).on("end",function(){Et.zoomFit&&!jt&&(jt=!0,ct(2))})}function R(){dt=[],gt=[],nt(Et.neo4jData)}function F(t){dt=[],gt=[],d3.json(t,function(t,e){if(t)throw t;e=a(e,Et.counters[0],Et.counters[1],Et.counters[2]),nt(e)})}function L(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})}function U(t){var e={nodes:[],relationships:[]};return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.nodes.forEach(function(t){b(e.nodes,t.id)||e.nodes.push(t)});var n=t.graph.relationships;n.forEach(function(t){t.startNode!==t.endNode&&(t.source=t.startNode,t.target=t.endNode,e.relationships.push(t))});for(var r=0;r<n.length;r++)for(var o=r;o<n.length;o++)n[r].linknum||(n[r].linknum=1),n[o].linknum||(n[o].linknum=1),n[r].source===n[o].target&&n[r].target===n[o].source&&(n[r].linknum=2,n[o].linknum=2)})}),e}function z(t,e){var n,r,o,i,a={nodes:[],relationships:[]},u=1+(e*Math.random()<<0),c=B();for(n=0;n<u;n++)r=A(),o={id:c.nodes+1+n,labels:[r],properties:{random:r},x:t.x,y:t.y},a.nodes[a.nodes.length]=o,i={id:c.relationships+1+n,type:r.toUpperCase(),startNode:t.id,endNode:c.nodes+1+n,properties:{from:Date.now()},source:t.id,target:c.nodes+1+n,linknum:c.relationships+1+n},a.relationships[a.relationships.length]=i;return a}function A(){var t=Object.keys(Et.iconMap);return t[t.length*Math.random()<<0]}function S(t,e,n,r,o){var i=Math.PI/180*o,a=Math.cos(i),u=Math.sin(i);return{x:a*(n-t)+u*(r-e)+t,y:a*(r-e)-u*(n-t)+e}}function q(t,e,n){return S(t.x,t.y,e.x,e.y,n)}function Q(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function B(){return{nodes:dt.length,relationships:gt.length}}function P(t){t.fx=d3.event.x,t.fy=d3.event.y}function W(){Z(),H()}function Z(){ft&&ft.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})}function H(){pt&&(pt.attr("transform",function(t){var e={x:0,y:0},n=Q(t.source,t.target),r=tt(t.source,t.target),o=$(t.source,t.target),i=q(e,r,-10),a=q(e,{x:0+(Et.nodeRadius+1)*r.x-o.x,y:0+(Et.nodeRadius+1)*r.y-o.y},n+10),u=q(e,{x:t.target.x-t.source.x-(Et.nodeRadius+2)*i.x,y:t.target.y-t.source.y-(Et.nodeRadius+2)*i.y},n),c=$(a,u),l={x:(a.x+u.x)/2+20*c.x,y:(a.y+u.y)/2+20*c.y};return t.outline={middle:l,source:a,target:u,u:c},"translate("+t.source.x+", "+t.source.y+") rotate("+n+")"}),G(),I(),J())}function I(){pt.each(function(){var t=d3.select(this).select(".outline"),e=d3.select(this).select(".text");t.attr("d",function(t){return 1===t.linknum?T(t,e):_(t)})})}function T(t,e){var n={x:0,y:0},r=Q(t.source,t.target),o=e.node().getBBox(),i=tt(t.source,t.target),a={x:.5*(t.target.x-t.source.x-(o.width+5)*i.x),y:.5*(t.target.y-t.source.y-(o.width+5)*i.y)},u=$(t.source,t.target),c=q(n,{x:a.x-u.x,y:a.y-u.y},r),l=q(n,{x:0+(Et.nodeRadius+1)*i.x,y:0+(Et.nodeRadius+1)*i.y},r),s=q(n,{x:t.target.x-t.source.x-(Et.nodeRadius+1)*i.x,y:t.target.y-t.source.y-(Et.nodeRadius+1)*i.y},r),f=q(n,{x:t.target.x-t.source.x-a.x-u.x,y:t.target.y-t.source.y-a.y-u.y},r);return"M "+c.x+" "+c.y+" L "+l.x+" "+l.y+" Z M "+s.x+" "+s.y+" L "+f.x+" "+f.y+" Z"}function _(t){var e=t.outline.source,n=t.outline.target,r=t.outline.middle;return"M "+n.x+", "+n.y+" Q "+r.x+" "+r.y+" "+e.x+" "+e.y+" Q "+r.x+" "+r.y+" "+n.x+", "+n.y}function J(){xt.attr("d",function(t){return 1===t.linknum?X(t):Y(t)})}function X(t){var e={x:0,y:0},n=Q(t.source,t.target),r=$(t.source,t.target),o=$(t.source,t.target,50),i=q(e,{x:0-o.x,y:0-o.y},n),a=q(e,{x:t.target.x-t.source.x-o.x,y:t.target.y-t.source.y-o.y},n),u=q(e,{x:t.target.x-t.source.x+o.x-r.x,y:t.target.y-t.source.y+o.y-r.y},n),c=q(e,{x:0+o.x-r.x,y:0+o.y-r.y},n);return"M "+i.x+" "+i.y+" L "+a.x+" "+a.y+" L "+u.x+" "+u.y+" L "+c.x+" "+c.y+" Z"}function Y(t){var e=t.outline.source,n=t.outline.target,r=t.outline.middle;return"M "+(e.x+5)+", "+(e.y+5)+" Q "+(r.x+5)+" "+(r.y+5)+" "+(n.x-5)+" "+(n.y-5)+"Q  "+(r.x-5)+" "+(r.y-5)+"  "+(e.x-5)+" "+(e.y-5)+"Z M "+(n.x-5)+", "+(n.y-5)+" Q "+(r.x-5)+" "+(r.y-5)+" "+(e.x+5)+" "+(e.y+5)+"Q  "+(r.x+5)+" "+(r.y+5)+"  "+(n.x+5)+" "+(n.y+5)+"Z"}function G(){ht.attr("transform",function(t){return 1===t.linknum?K(t):V(t)})}function K(t){var e=(Q(t.source,t.target)+360)%360,n=e>90&&e<270,r={x:0,y:0},o=$(t.source,t.target),i=n?2:-3,a={x:.5*(t.target.x-t.source.x)+o.x*i,y:.5*(t.target.y-t.source.y)+o.y*i},u=q(r,a,e);return"translate("+u.x+", "+u.y+") rotate("+(n?180:0)+")"}function V(t){var e=(Q(t.source,t.target)+360)%360,n=e>90&&e<270,r=t.outline.source,o=t.outline.target,i=t.outline.u,a={x:(r.x+o.x)/2+i.x*(n?8:10)+i.x,y:(r.y+o.y)/2+i.y*(n?8:10)+i.y};return"translate("+a.x+", "+a.y+") rotate("+(n?180:0)+")"}function $(t,e,n){return q({x:0,y:0},tt(t,e,n),90)}function tt(t,e,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/Math.sqrt(n||1);return{x:(e.x-t.x)/r,y:(e.y-t.y)/r}}function et(t){it(t.nodes,t.relationships)}function nt(t){et(U(t))}function rt(t){v(),t.labels?u("class",t.labels[0]):l("class",t.type),c("property","&lt;id&gt;",t.id),Object.keys(t.properties).forEach(function(e){c("property",e,JSON.stringify(t.properties[e]))})}function ot(t){Array.prototype.push.apply(dt,t),ft=kt.selectAll(".node").data(dt,function(t){return t.id});var e=f();ft=e.merge(ft)}function it(t,e){at(e),ot(t),vt.nodes(dt),vt.force("link").links(gt)}function at(t){Array.prototype.push.apply(gt,t),pt=Mt.selectAll(".relationship").data(gt,function(t){return t.id});var e=h();pt=e.relationship.merge(pt),yt=bt.selectAll(".relationship .outline"),yt=e.outline.merge(yt),xt=bt.selectAll(".relationship .overlay"),xt=e.overlay.merge(xt),ht=bt.selectAll(".relationship .text"),ht=e.text.merge(ht)}function ut(){return Rt}function ct(t){var e=bt.node().getBBox(),n=bt.node().parentElement.parentElement,r=n.clientWidth,o=n.clientHeight,i=e.width,a=e.height,u=e.x+i/2,c=e.y+a/2;0!==i&&0!==a&&(Dt=.85/Math.max(i/r,a/o),Ct=[r/2-Dt*u,o/2-Dt*c],bt.attr("transform","translate("+Ct[0]+", "+Ct[1]+") scale("+Dt+")"))}var lt,st,ft,dt,pt,yt,xt,ht,gt,mt,vt,bt,kt,Mt,Dt,Ct,Nt={},jt=!1,wt=0,Et={arrowSize:4,colors:function(){return["#68bdf6","#6dce9e","#faafc2","#f2baf6","#ff928c","#fcea7e","#ffc766","#405f9e","#a5abb6","#78cecb","#b88cbb","#ced2d9","#e84646","#fa5f86","#ffab1a","#fcda19","#797b80","#c9d96f","#47991f","#70edee","#ff75ea"]}(),highlight:void 0,iconMap:void 0,icons:void 0,imageMap:{},images:void 0,infoPanel:!0,minCollision:void 0,neo4jData:void 0,neo4jDataUrl:void 0,nodeOutlineFillColor:void 0,nodeRadius:25,relationshipColor:"#a5abb6",zoomFit:!1,counters:[!0,!0,!1]},Ot={},Rt="0.0.1";return function(t,e){L(Et,e),Et.icons&&(Et.showIcons=!0),Et.minCollision||(Et.minCollision=2*Et.nodeRadius),E(),mt=t,lt=d3.select(mt),lt.attr("class","neo4jd3").html(""),Et.infoPanel&&(st=o(lt)),n(lt),vt=O(),Et.neo4jData?R(Et.neo4jData):Et.neo4jDataUrl?F(Et.neo4jDataUrl):console.error("Error: both neo4jData and neo4jDataUrl are empty!")}(t,e),{neo4jDataToD3Data:U,randomD3Data:z,size:B,updateWithD3Data:et,updateWithNeo4jData:nt,version:ut}}e.exports=r},{}]},{},[1])(1)});